<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data noupdate="1">
        <record id="mail_fs_measurement_confirmed" model="mail.template">
                    <field name="name">FS - Toma de medidas confirmada</field>
                    <field name="model_id" ref="project.model_project_task"/>
                    <field name="subject">[FS] Confirmación de Tarea: ${object.fs_sequence or object.name}</field>
                    <field name="email_from">${(user.email or '')|safe}</field>
                    <field name="email_to">
                        ${(object.company_id.fs_coordinator_leveling_id.partner_id.email or '')|safe}
                    </field>
                    <field name="body_html" type="html">
                        <div style="background-color:#f5f7fb;padding:20px 0;font-family:Arial, sans-serif;font-size:14px;color:#333;">
                            <div style="max-width:650px;margin:0 auto;background-color:#ffffff;border-radius:8px;border:1px solid #e0e4f0;box-shadow:0 2px 6px rgba(0,0,0,0.04);overflow:hidden;">

                                <!-- Header -->
                                <div style="background:#2974d5;color:#ffffff;padding:14px 22px;">
                                    <div style="font-size:12px;letter-spacing:1px;text-transform:uppercase;opacity:0.9;">
                                        Toma de medidas confirmada
                                    </div>
                                    <div style="margin-top:4px;font-size:18px;font-weight:bold;">
                                        Nueva tarea: <t t-out="object.fs_sequence or object.name"/>
                                    </div>
                                    <div style="margin-top:2px;font-size:12px;opacity:0.85;">
                                        <t t-out="object.company_id.name"/>
                                    </div>
                                </div>

                                <!-- Body -->
                                <div style="padding:22px 22px 10px 22px;">
                                    <p style="margin:0 0 10px 0;">
                                        Hola
                                        <strong>
                                            <t t-out="object.company_id.fs_coordinator_leveling_id.name or ''"/>
                                        </strong>,
                                    </p>

                                    <p>
                                        El colaborador
                                        <strong><t t-out="user.name"/></strong>
                                        ha confirmado la siguiente tarea:
                                    </p>

                                    <!-- Resumen tarjeta -->
                                    <div style="border-radius:6px;border:1px solid #e3e7f0;background:#f9fafc;padding:12px 14px;margin-bottom:16px;">
                                        <div style="font-size:12px;text-transform:uppercase;color:#6b7280;margin-bottom:6px;font-weight:bold;">
                                            Resumen de la tarea
                                        </div>
                                        <table style="width:100%;border-collapse:collapse;font-size:13px;">
                                            <tbody>
                                                <tr>
                                                    <td style="padding:3px 0;width:30%;color:#6b7280;">Folio tarea</td>
                                                    <td style="padding:3px 0;font-weight:bold;">
                                                        <t t-out="object.fs_sequence or object.name"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td style="padding:3px 0;color:#6b7280;">Nombre</td>
                                                    <td style="padding:3px 0;">
                                                        <t t-out="object.name"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td style="padding:3px 0;color:#6b7280;">Cliente</td>
                                                    <td style="padding:3px 0;">
                                                        <t t-out="object.sale_order_id.partner_id.display_name or ''"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td style="padding:3px 0;color:#6b7280;">Orden de venta</td>
                                                    <td style="padding:3px 0;">
                                                        <t t-out="object.sale_order_id.name or ''"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td style="padding:3px 0;color:#6b7280;">Fecha estimada</td>
                                                    <td style="padding:3px 0;">
                                                        <t t-if="object.fs_fecha_estimada_instalacion">
                                                            <t t-out="format_date(object.fs_fecha_estimada_instalacion)"/>
                                                        </t>
                                                        <t t-if="not object.fs_fecha_estimada_instalacion">Sin fecha definida</t>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <!-- Call to action -->
                                    <p style="margin:0 0 18px 0; text-align:center;">
                                        <a t-att-href="object.get_base_url() + '/web#id=%s&amp;model=project.task&amp;view_type=form' % object.id"
                                        style="display:inline-block;background:#2974d5;color:#ffffff;text-decoration:none;padding:9px 18px;border-radius:4px;font-size:13px;font-weight:bold;">
                                            Abrir tarea en Odoo
                                        </a>
                                    </p>

                                    <p style="margin:0 0 4px 0;font-size:12px;color:#6b7280;">
                                        Verifica desniveles, materiales y tiempos estimados antes de coordinar al equipo en sitio.
                                    </p>
                                </div>

                                <!-- Footer -->
                                <div style="border-top:1px solid #e5e7eb;padding:10px 22px 14px 22px;font-size:11px;color:#9ca3af;">
                                    Este es un mensaje automático generado por el módulo de Field Service.
                                </div>
                            </div>
                        </div>
                    </field>
                </record>
    </data>
</odoo>
